"use strict";(self.webpackChunksmartbox_fe=self.webpackChunksmartbox_fe||[]).push([[861],{8861:(E,_,o)=>{o.d(_,{G:()=>s});var c=o(6425),a=o(2382),p=o(2831),e=o(1223),y=o(8441),g=o(72),f=o(2290),h=o(5425),O=o(8356),v=o(9808);function D(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function I(n,i){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,D,2,0,"div",27),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.email.errors.required)}}function m(n,i){1&n&&e._UZ(0,"i",28)}function d(n,i){1&n&&e._UZ(0,"i",29)}function b(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function w(n,i){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,b,2,0,"div",27),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.passwords.errors.required)}}const x=function(n){return{"is-invalid":n}};function C(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"h5",9),e._uU(2,"Login"),e.qZA(),e.TgZ(3,"button",10),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA()(),e.TgZ(4,"div",11)(5,"form",12)(6,"div",13),e._UZ(7,"input",14),e.TgZ(8,"span",15),e._UZ(9,"i",16),e.qZA(),e.YNc(10,I,2,1,"div",17),e.qZA(),e.TgZ(11,"div",13),e._UZ(12,"input",18),e.TgZ(13,"span",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClick()}),e.YNc(14,m,1,0,"i",20),e.YNc(15,d,1,0,"i",21),e.qZA(),e.YNc(16,w,2,1,"div",17),e.qZA()(),e.TgZ(17,"a",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().navigate()}),e._uU(18,"Forgot password?"),e.qZA()(),e.TgZ(19,"div",23)(20,"button",24),e.NdJ("click",function(){return e.CHM(t).$implicit.close("Save click")}),e._uU(21,"Cancel"),e.qZA(),e.TgZ(22,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(23,"Login"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("formGroup",t.registrationForm),e.xp6(2),e.Q6J("ngClass",e.VKq(8,x,t.submitted&&t.f.email.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&t.f.email.errors),e.xp6(2),e.Q6J("type",t.password)("ngClass",e.VKq(10,x,t.submitted&&t.f.passwords.errors)),e.xp6(2),e.Q6J("ngIf",!t.show),e.xp6(1),e.Q6J("ngIf",t.show),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.passwords.errors)}}let s=(()=>{class n{constructor(t,r,l,u,S,P,N){this.modalService=t,this.ngxService=r,this.spinner=l,this.toastrService=u,this.router=S,this.fb=P,this.apiservice=N,this.submitted=!1,this.show=!1,this.registrationForm=this.fb.group({email:["",[a.kI.required]],passwords:["",[a.kI.required,a.kI.minLength(6)]]})}ngOnInit(){this.password="password"}get f(){return this.registrationForm.controls}onSubmit(){this.registrationForm.valid?(this.ngxService.start(),this.apiservice.doLogin({email:this.registrationForm.value.email,password:this.registrationForm.value.passwords}).subscribe(r=>{this.ngxService.stop(),this.registrationForm.reset({}),1==r.login?(this.modalService.dismissAll(),this.toastrService.success("Logged-in!","Success!"),localStorage.setItem("smartbox_token",r.cookie),localStorage.setItem("workstationID",r.workstationID),localStorage.setItem("smartbox_name",r.workstationName),localStorage.setItem("customerID",r.customerID),localStorage.setItem("smartbox_Authenticated","true"),"1"==r.template?(localStorage.setItem("role","office"),this.router.navigate([p.O.HOME+"/"+p.O.LANDING_PAGE])):(localStorage.setItem("role","shopfloor"),this.router.navigate([p.O.USER+"/"+p.O.DASHBOARD]))):this.toastrService.error("Login failed!","Error!")},r=>{})):this.submitted=!0}navigate(){this.modalService.dismissAll(),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([p.O.FORGOTPASSWORD])})}onClick(){"password"===this.password?(this.password="text",this.show=!0):(this.password="password",this.show=!1)}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(t){return t===c.If.ESC?"by pressing ESC":t===c.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.FF),e.Y36(y.LA),e.Y36(g.t2),e.Y36(f._W),e.Y36(h.F0),e.Y36(a.qu),e.Y36(O.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-header"]],decls:11,vars:0,consts:[[1,"navbar"],[1,"container"],["href","",1,"navbar-brand"],["src","https://smartbox-solutions.nl/wp-content/uploads/2021/03/logo_1200x300-300x75.png"],["id","#",1,"mr-3"],["id","userName",1,"mr-3"],["type","button","id","menuLoginButton",1,"btn","btn-primary",3,"click"],["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"input-group","mb-3"],["type","text","formControlName","email","required","","placeholder","Username","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"ngClass"],["id","basic-addon1",1,"input-group-text"],[1,"fa","fa-user","icon"],["class","invalid-feedback",4,"ngIf"],["formControlName","passwords","required","","placeholder","Password","aria-label","Password","aria-describedby","basic-addon1",1,"form-control",3,"type","ngClass"],["id","basic-addon1",1,"input-group-text",3,"click"],["class","fa fa-eye","aria-hidden","true",4,"ngIf"],["class","fa fa-eye-slash","aria-hidden","true",4,"ngIf"],[1,"link-primary",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],["aria-hidden","true",1,"fa","fa-eye"],["aria-hidden","true",1,"fa","fa-eye-slash"]],template:function(t,r){if(1&t){const l=e.EpF();e.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"span",4)(6,"span",5),e.TgZ(7,"button",6),e.NdJ("click",function(){e.CHM(l);const S=e.MAs(10);return r.open(S)}),e._uU(8,"Login"),e.qZA()()()(),e.YNc(9,C,24,12,"ng-template",null,7,e.W1O)}},directives:[c.M2,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,v.mk,v.O5],styles:[".basic-addon1[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()},72:(E,_,o)=>{o.d(_,{ef:()=>C,t2:()=>b});var c=o(1223),a=o(1135),p=o(9300),e=o(9808);const m="primary";class d{constructor(n){Object.assign(this,n)}static create(n){return(null==(null==n?void 0:n.type)||0===n.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new d(n)}}let b=(()=>{class s{constructor(){this.spinnerObservable=new a.X(null)}getSpinner(i){return this.spinnerObservable.asObservable().pipe((0,p.h)(t=>t&&t.name===i))}show(i=m,t){return new Promise((r,l)=>{setTimeout(()=>{t&&Object.keys(t).length?(t.name=i,this.spinnerObservable.next(new d(Object.assign(Object.assign({},t),{show:!0}))),r(!0)):(this.spinnerObservable.next(new d({name:i,show:!0})),r(!0))},10)})}hide(i=m,t=10){return new Promise((r,l)=>{setTimeout(()=>{this.spinnerObservable.next(new d({name:i,show:!1})),r(!0)},t)})}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),C=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[[e.ez]]}),s})()}}]);