"use strict";(self.webpackChunksmartbox_fe=self.webpackChunksmartbox_fe||[]).push([[861],{8861:(w,_,a)=>{a.d(_,{G:()=>r});var c=a(193),o=a(3075),p=a(2831),e=a(7587),S=a(8441),f=a(72),g=a(2290),h=a(6609),y=a(8356),v=a(9808);function O(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function D(n,i){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,O,2,0,"div",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.email.errors.required)}}function m(n,i){1&n&&e._UZ(0,"i",21)}function d(n,i){1&n&&e._UZ(0,"i",22)}function b(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function I(n,i){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,b,2,0,"div",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.passwords.errors.required)}}const x=function(n){return{"is-invalid":n}};function C(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"h5",2),e._uU(2,"Login"),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA()(),e.TgZ(4,"div",4)(5,"form",5)(6,"div",6),e._UZ(7,"input",7),e.TgZ(8,"span",8),e._UZ(9,"i",9),e.qZA(),e.YNc(10,D,2,1,"div",10),e.qZA(),e.TgZ(11,"div",6),e._UZ(12,"input",11),e.TgZ(13,"span",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClick()}),e.YNc(14,m,1,0,"i",13),e.YNc(15,d,1,0,"i",14),e.qZA(),e.YNc(16,I,2,1,"div",10),e.qZA()(),e.TgZ(17,"a",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().navigate()}),e._uU(18,"Forgot password?"),e.qZA()(),e.TgZ(19,"div",16)(20,"button",17),e.NdJ("click",function(){return e.CHM(t).$implicit.close("Save click")}),e._uU(21,"Cancel"),e.qZA(),e.TgZ(22,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(23,"Login"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("formGroup",t.registrationForm),e.xp6(2),e.Q6J("ngClass",e.VKq(8,x,t.submitted&&t.f.email.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&t.f.email.errors),e.xp6(2),e.Q6J("type",t.password)("ngClass",e.VKq(10,x,t.submitted&&t.f.passwords.errors)),e.xp6(2),e.Q6J("ngIf",!t.show),e.xp6(1),e.Q6J("ngIf",t.show),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.passwords.errors)}}let r=(()=>{class n{constructor(t,s,l,u,E,P,N){this.modalService=t,this.ngxService=s,this.spinner=l,this.toastrService=u,this.router=E,this.fb=P,this.apiservice=N,this.submitted=!1,this.show=!1,this.registrationForm=this.fb.group({email:["",[o.kI.required]],passwords:["",[o.kI.required,o.kI.minLength(6)]]})}ngOnInit(){this.password="password"}get f(){return this.registrationForm.controls}onSubmit(){this.registrationForm.valid?(this.ngxService.start(),this.apiservice.doLogin({email:this.registrationForm.value.email,password:this.registrationForm.value.passwords}).subscribe(s=>{this.ngxService.stop(),this.registrationForm.reset({}),1==s.login?(this.modalService.dismissAll(),this.toastrService.success("Logged-in!","Success!"),localStorage.setItem("smartbox_token",s.cookie),localStorage.setItem("workstationID",s.workstationID),localStorage.setItem("smartbox_name",s.workstationName),localStorage.setItem("customerID",s.customerID),localStorage.setItem("smartbox_Authenticated","true"),"1"==s.template?(localStorage.setItem("role","office"),this.router.navigate([p.O.HOME+"/"+p.O.LANDING_PAGE])):(localStorage.setItem("role","shopfloor"),this.router.navigate([p.O.USER+"/"+p.O.DASHBOARD]))):this.toastrService.error("Login failed!","Error!")},s=>{})):this.submitted=!0}navigate(){this.modalService.dismissAll(),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([p.O.FORGOTPASSWORD])})}onClick(){"password"===this.password?(this.password="text",this.show=!0):(this.password="password",this.show=!1)}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(s=>{this.closeResult=`Closed with: ${s}`},s=>{this.closeResult=`Dismissed ${this.getDismissReason(s)}`})}getDismissReason(t){return t===c.If.ESC?"by pressing ESC":t===c.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.FF),e.Y36(S.LA),e.Y36(f.t2),e.Y36(g._W),e.Y36(h.F0),e.Y36(o.qu),e.Y36(y.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-header"]],decls:2,vars:0,consts:[["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"input-group","mb-3"],["type","text","formControlName","email","required","","placeholder","Username","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"ngClass"],["id","basic-addon1",1,"input-group-text"],[1,"fa","fa-user","icon"],["class","invalid-feedback",4,"ngIf"],["formControlName","passwords","required","","placeholder","Password","aria-label","Password","aria-describedby","basic-addon1",1,"form-control",3,"type","ngClass"],["id","basic-addon1",1,"input-group-text",3,"click"],["class","fa fa-eye","aria-hidden","true",4,"ngIf"],["class","fa fa-eye-slash","aria-hidden","true",4,"ngIf"],[1,"link-primary",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],["aria-hidden","true",1,"fa","fa-eye"],["aria-hidden","true",1,"fa","fa-eye-slash"]],template:function(t,s){1&t&&e.YNc(0,C,24,12,"ng-template",null,0,e.W1O)},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.Q7,v.mk,v.O5],styles:[".basic-addon1[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()},72:(w,_,a)=>{a.d(_,{ef:()=>C,t2:()=>b});var c=a(7587),o=a(1135),p=a(9300),e=a(9808);const m="primary";class d{constructor(n){Object.assign(this,n)}static create(n){return(null==(null==n?void 0:n.type)||0===n.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new d(n)}}let b=(()=>{class r{constructor(){this.spinnerObservable=new o.X(null)}getSpinner(i){return this.spinnerObservable.asObservable().pipe((0,p.h)(t=>t&&t.name===i))}show(i=m,t){return new Promise((s,l)=>{setTimeout(()=>{t&&Object.keys(t).length?(t.name=i,this.spinnerObservable.next(new d(Object.assign(Object.assign({},t),{show:!0}))),s(!0)):(this.spinnerObservable.next(new d({name:i,show:!0})),s(!0))},10)})}hide(i=m,t=10){return new Promise((s,l)=>{setTimeout(()=>{this.spinnerObservable.next(new d({name:i,show:!1})),s(!0)},t)})}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),C=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[[e.ez]]}),r})()}}]);